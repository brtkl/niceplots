{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Info","text":"<p>The purpose of this website is to create a gallery of nice plots, along with respective SAS/R snippets.</p>"},{"location":"#data","title":"Data","text":"<p>The source data used in the clinical plots examples come from CDISC pilot project. All examples are solely illustrative and focus on layout. No conclusions should be drawn from presented results. </p>"},{"location":"kmplots/","title":"KM plots","text":""},{"location":"kmplots/#1-km-plot-with-numer-of-subjects-at-risk","title":"1. KM Plot with numer of subjects at risk","text":"Snippet <pre><code>libname xptadam xport \"&amp;fpath.\\data\\adam\\xpt\\adtte.xpt\";\n\nproc copy inlib=xptadam outlib=work;\nrun;\n\nproc format;\n    value $_trt \n        '0'='Placebo'\n        '54'='Drug A'\n        '81'='Drug B';\nrun;\n\n\nods graphics on;\nods output survivalplot=surv1;\nproc lifetest data=adtte plots=survival(atrisk=0 to 200 by 20);\n    time aval*cnsr(1);\n    strata trtan;\nrun;\nods graphics off;\n\n\nproc datasets noprint;\n    modify surv1;\n    format stratum $_trt.;\n    label time='Study day';\nquit;\n\nods listing style=htmlblue image_dpi=300 gpath=\"&amp;fpath.\\output\"; \n\nods graphics / reset width=8in height=6in imagename='kmplot01';\n\ntitle 'KM Plot 1';\nproc sgplot data=surv1;\n    step x=time y=survival / group=stratum lineattrs=(pattern=solid) name='s';\n    scatter x=time y=censored / markerattrs=(symbol=plus) name='c';\n    scatter x=time y=censored / markerattrs=(symbol=plus) group=stratum;\n    xaxistable atrisk / x=tatrisk location=inside class=stratum colorgroup=stratum \n        separator valueattrs=(size=7 weight=bold) labelattrs=(size=8);\n    xaxis values=(0 to 200 by 20) ;\n    keylegend 'c' / location=inside position=topright;\n    keylegend 's';\nrun;\n\nods graphics off;\n</code></pre>"},{"location":"panels/","title":"Panels","text":""},{"location":"panels/#1-ggplot2-panel-plot-with-common-axes","title":"1. ggplot2 - Panel plot with common axes","text":"Snippet <pre><code>library(tidyverse)\nlibrary(readxl)\nlibrary(janitor)\nlibrary(patchwork)\n\n# --- 1. Data Prep ---\ndata &lt;- read_excel('waga.xlsx') |&gt;\n  clean_names() |&gt;\n  mutate(data = as.Date(data)) |&gt; #important, otherwise datetime\n  filter(data &lt; '2026-03-01')\n\n# Get first walking date for reference line\nfirst_walking_date &lt;- data %&gt;%\n  filter(!is.na(kilometry_na_biezni)) %&gt;%\n  slice(1) %&gt;%\n  pull(data)\n\n# Common X-axis limits to ensure perfect alignment\ndate_limits &lt;- range(data$data)\n\n\nshared_x_scale &lt;- scale_x_date(\n  limits = date_limits,\n  date_breaks = \"1 month\",       # Major grid lines (thick)\n  minor_breaks = NULL,\n  date_labels = \"%m-%Y\",         # Label format (e.g., Jan-2026)\n  name = NULL                    # Hide axis title (we'll set it manually if needed)\n)\n\n# --- 2. Top Plot: Weight (Line + Points) ---\np_weight &lt;- ggplot(data, aes(x = data, y = waga_kg)) +\n  # Geoms\n  geom_point(color = \"#2E86AB\", size = 2.5, alpha = 0.7) +\n  geom_line(color = \"#2E86AB\", linewidth = 0.8, alpha = 0.3) +\n  geom_smooth(method = \"loess\", span=0.6, color = \"#A23B72\", fill = \"#E09A01\"\n              , alpha = 0.1, linewidth = 1.0) +\n\n  # Vertical line for context\n  geom_vline(xintercept = as.numeric(first_walking_date),\n             linetype = \"dashed\", color = \"darkgreen\", linewidth = 0.8, alpha=0.5) +\n\n  # Scales &amp; Theme\n  scale_y_continuous(name = \"Weight (kg)\") +\n  shared_x_scale + # Lock x-axis\n  labs(title = \"Weight Progress &amp; Walking Distance\",\n       subtitle = \"Daily weight measurements\") +\n  theme_minimal() +\n  theme(\n    axis.title.x = element_blank(), # Remove x-label from top plot\n    axis.text.x = element_blank(),  # Remove x-axis dates from top plot (optional, or keep them)\n    plot.margin = margin(b = 5)     # Reduce bottom margin to bring plots closer\n  )\n\n# --- 3. Bottom Plot: Walking Distance (Bar Chart) ---\np_distance &lt;- ggplot(data, aes(x = data, y = kilometry_na_biezni)) +\n  # Geoms\n  geom_col(fill = \"grey40\", alpha = 0.7, width = 0.8) + # Using geom_col is fine now!\n\n  # Vertical line alignment\n  geom_vline(xintercept = as.numeric(first_walking_date),\n             linetype = \"dashed\", color = \"darkgreen\", linewidth = 0.8, alpha = 0.5) +\n\n  # Scales &amp; Theme\n  scale_y_continuous(name = \"Distance (km)\", position = \"left\") + # Put axis on right\n\n  shared_x_scale +\n\n  labs(subtitle = \"Daily Walking Pad Activity\") +\n  theme_minimal() +\n  theme(\n    panel.grid.minor = element_blank(),\n    plot.margin = margin(t = 5),     # Reduce top margin\n    # --- NEW: Bigger X-Axis Text ---\n    axis.text.x = element_text(size = 9)\n  )\n\n\n\n# 1. Create the combined plot as usual (clean, no border yet)\ncombined_plot &lt;- (p_weight / p_distance) +\n  plot_layout(heights = c(2, 1), axes = \"collect\") +\n  plot_annotation(\n    theme = theme(\n      plot.background = element_rect(color = \"black\", linewidth = 1, fill = NA),\n      # Inner padding (space between plots and the border)\n      plot.margin = margin(15, 15, 15, 15)\n    )\n  )\n\n# 2. Wrap it to add the floating border\nfinal_with_border &lt;- wrap_elements(combined_plot) +\n  theme(\n    # The Border\n\n    # Outer Margin (Space between border and file edge)\n    plot.margin = margin(20, 20, 20, 20)\n  )\n\nprint(final_with_border)\n\nggsave(\"weight_progress_v1.png\", plot = final_with_border,\n       width = 10, height = 8, dpi = 300, bg = \"white\")\n</code></pre>"}]}